(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{330:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){return[].slice.call(t.querySelectorAll("*"),0).reduce(function(t,i){return t.concat(i.shadowRoot?e(i.shadowRoot):[i])},[]).filter(n)};var i=/^(input|select|textarea|button|object|iframe)$/;function n(e){var t,n,a=e.getAttribute("tabindex");null===a&&(a=void 0);var r=isNaN(a);return(r||a>=0)&&(t=!r,n=e.nodeName.toLowerCase(),(i.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e,i=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(i&&t===i&&(t=i.host.parentNode),function(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var i=window.getComputedStyle(e),n=i.getPropertyValue("display");return t?"contents"!==n&&("visible"!==i.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0):"none"===n}catch(e){return console.warn("Failed to inspect element style"),!1}}(t))return!1;t=t.parentNode}return!0}(e))}e.exports=t.default},1457:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){a=[]},t.log=function(){},t.handleBlur=s,t.handleFocus=l,t.markForFocusLater=function(){a.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{0!==a.length&&(t=a.pop()).focus({preventScroll:e});return}catch(e){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){a.length>0&&a.pop()},t.setupScopedFocus=function(e){r=e,window.addEventListener?(window.addEventListener("blur",s,!1),document.addEventListener("focus",l,!0)):(window.attachEvent("onBlur",s),document.attachEvent("onFocus",l))},t.teardownScopedFocus=function(){r=null,window.addEventListener?(window.removeEventListener("blur",s),document.removeEventListener("focus",l)):(window.detachEvent("onBlur",s),document.detachEvent("onFocus",l))};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(330)),a=[],r=null,o=!1;function s(){o=!0}function l(){o&&(o=!1,r&&setTimeout(function(){r.contains(document.activeElement)||((0,n.default)(r)[0]||r).focus()},0))}},2586:(e,t,i)=>{"use strict";i.d(t,{nU:()=>F,qb:()=>B});var n=i(7431);function a(e,t,i,a,r,o,s,l){let c=(e,t,i,a)=>[new n.I9Y(e/s,1-a/l),new n.I9Y(i/s,1-a/l),new n.I9Y(i/s,1-t/l),new n.I9Y(e/s,1-t/l)],u=c(t+o,i,t+a+o,i+o),d=c(t+a+o,i,t+2*a+o,i+o),h=c(t,i+o,t+o,i+o+r),p=c(t+o,i+o,t+a+o,i+o+r),f=c(t+a+o,i+o,t+a+2*o,i+r+o),m=c(t+a+2*o,i+o,t+2*a+2*o,i+r+o),b=e.attributes.uv,g=[f[3],f[2],f[0],f[1]],v=[h[3],h[2],h[0],h[1]],y=[u[3],u[2],u[0],u[1]],w=[d[0],d[1],d[3],d[2]],O=[p[3],p[2],p[0],p[1]],x=[m[3],m[2],m[0],m[1]],E=[];for(let e of[g,v,y,w,O,x])for(let t of e)E.push(t.x,t.y);b.set(new Float32Array(E)),b.needsUpdate=!0}function r(e,t,i,n,r,o){a(e,t,i,n,r,o,64,64)}function o(e,t,i,n,r,o){a(e,t,i,n,r,o,64,32)}class s extends n.YJl{constructor(e,t){super(),Object.defineProperty(this,"innerLayer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"outerLayer",{enumerable:!0,configurable:!0,writable:!0,value:t}),e.name="inner",t.name="outer"}}class l extends n.YJl{constructor(){super(),Object.defineProperty(this,"head",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rightArm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"leftArm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rightLeg",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"leftLeg",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelListeners",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"slim",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_map",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"layer1Material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layer1MaterialBiased",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layer2Material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layer2MaterialBiased",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.layer1Material=new n._4j({side:n.hB5}),this.layer2Material=new n._4j({side:n.$EB,transparent:!0,alphaTest:1e-5}),this.layer1MaterialBiased=this.layer1Material.clone(),this.layer1MaterialBiased.polygonOffset=!0,this.layer1MaterialBiased.polygonOffsetFactor=1,this.layer1MaterialBiased.polygonOffsetUnits=1,this.layer2MaterialBiased=this.layer2Material.clone(),this.layer2MaterialBiased.polygonOffset=!0,this.layer2MaterialBiased.polygonOffsetFactor=1,this.layer2MaterialBiased.polygonOffsetUnits=1;let e=new n.iNn(8,8,8);r(e,0,0,8,8,8);let t=new n.eaF(e,this.layer1Material),i=new n.iNn(9,9,9);r(i,32,0,8,8,8);let a=new n.eaF(i,this.layer2Material);this.head=new s(t,a),this.head.name="head",this.head.add(t,a),t.position.y=4,a.position.y=4,this.add(this.head);let o=new n.iNn(8,12,4);r(o,16,16,8,12,4);let l=new n.eaF(o,this.layer1Material),c=new n.iNn(8.5,12.5,4.5);r(c,16,32,8,12,4);let u=new n.eaF(c,this.layer2Material);this.body=new s(l,u),this.body.name="body",this.body.add(l,u),this.body.position.y=-6,this.add(this.body);let d=new n.iNn,h=new n.eaF(d,this.layer1MaterialBiased);this.modelListeners.push(()=>{h.scale.x=this.slim?3:4,h.scale.y=12,h.scale.z=4,r(d,40,16,this.slim?3:4,12,4)});let p=new n.iNn,f=new n.eaF(p,this.layer2MaterialBiased);this.modelListeners.push(()=>{f.scale.x=this.slim?3.5:4.5,f.scale.y=12.5,f.scale.z=4.5,r(p,40,32,this.slim?3:4,12,4)});let m=new n.YJl;m.add(h,f),this.modelListeners.push(()=>{m.position.x=this.slim?-.5:-1}),m.position.y=-4,this.rightArm=new s(h,f),this.rightArm.name="rightArm",this.rightArm.add(m),this.rightArm.position.x=-5,this.rightArm.position.y=-2,this.add(this.rightArm);let b=new n.iNn,g=new n.eaF(b,this.layer1MaterialBiased);this.modelListeners.push(()=>{g.scale.x=this.slim?3:4,g.scale.y=12,g.scale.z=4,r(b,32,48,this.slim?3:4,12,4)});let v=new n.iNn,y=new n.eaF(v,this.layer2MaterialBiased);this.modelListeners.push(()=>{y.scale.x=this.slim?3.5:4.5,y.scale.y=12.5,y.scale.z=4.5,r(v,48,48,this.slim?3:4,12,4)});let w=new n.YJl;w.add(g,y),this.modelListeners.push(()=>{w.position.x=this.slim?.5:1}),w.position.y=-4,this.leftArm=new s(g,y),this.leftArm.name="leftArm",this.leftArm.add(w),this.leftArm.position.x=5,this.leftArm.position.y=-2,this.add(this.leftArm);let O=new n.iNn(4,12,4);r(O,0,16,4,12,4);let x=new n.eaF(O,this.layer1MaterialBiased),E=new n.iNn(4.5,12.5,4.5);r(E,0,32,4,12,4);let P=new n.eaF(E,this.layer2MaterialBiased),C=new n.YJl;C.add(x,P),C.position.y=-6,this.rightLeg=new s(x,P),this.rightLeg.name="rightLeg",this.rightLeg.add(C),this.rightLeg.position.x=-1.9,this.rightLeg.position.y=-12,this.rightLeg.position.z=-.1,this.add(this.rightLeg);let T=new n.iNn(4,12,4);r(T,16,48,4,12,4);let R=new n.eaF(T,this.layer1MaterialBiased),S=new n.iNn(4.5,12.5,4.5);r(S,0,48,4,12,4);let A=new n.eaF(S,this.layer2MaterialBiased),j=new n.YJl;j.add(R,A),j.position.y=-6,this.leftLeg=new s(R,A),this.leftLeg.name="leftLeg",this.leftLeg.add(j),this.leftLeg.position.x=1.9,this.leftLeg.position.y=-12,this.leftLeg.position.z=-.1,this.add(this.leftLeg),this.modelType="default"}get map(){return this._map}set map(e){this._map=e,this.layer1Material.map=e,this.layer1Material.needsUpdate=!0,this.layer1MaterialBiased.map=e,this.layer1MaterialBiased.needsUpdate=!0,this.layer2Material.map=e,this.layer2Material.needsUpdate=!0,this.layer2MaterialBiased.map=e,this.layer2MaterialBiased.needsUpdate=!0}get modelType(){return this.slim?"slim":"default"}set modelType(e){this.slim="slim"===e,this.modelListeners.forEach(e=>e())}getBodyParts(){return this.children.filter(e=>e instanceof s)}setInnerLayerVisible(e){this.getBodyParts().forEach(t=>t.innerLayer.visible=e)}setOuterLayerVisible(e){this.getBodyParts().forEach(t=>t.outerLayer.visible=e)}resetJoints(){this.head.rotation.set(0,0,0),this.leftArm.rotation.set(0,0,0),this.rightArm.rotation.set(0,0,0),this.leftLeg.rotation.set(0,0,0),this.rightLeg.rotation.set(0,0,0),this.body.rotation.set(0,0,0),this.head.position.y=0,this.body.position.y=-6,this.body.position.z=0,this.rightArm.position.x=-5,this.rightArm.position.y=-2,this.rightArm.position.z=0,this.leftArm.position.x=5,this.leftArm.position.y=-2,this.leftArm.position.z=0,this.rightLeg.position.x=-1.9,this.rightLeg.position.y=-12,this.rightLeg.position.z=-.1,this.leftLeg.position.x=1.9,this.leftLeg.position.y=-12,this.leftLeg.position.z=-.1}}class c extends n.YJl{constructor(){super(),Object.defineProperty(this,"cape",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.material=new n._4j({side:n.$EB,transparent:!0,alphaTest:1e-5});let e=new n.iNn(10,16,1);o(e,0,0,10,16,1),this.cape=new n.eaF(e,this.material),this.cape.position.y=-8,this.cape.position.z=.5,this.add(this.cape)}get map(){return this.material.map}set map(e){this.material.map=e,this.material.needsUpdate=!0}}class u extends n.YJl{constructor(){super(),Object.defineProperty(this,"leftWing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rightWing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.material=new n._4j({side:n.$EB,transparent:!0,alphaTest:1e-5});let e=new n.iNn(12,22,4);o(e,22,0,10,20,2);let t=new n.eaF(e,this.material);t.position.x=-5,t.position.y=-10,t.position.z=-1,this.leftWing=new n.YJl,this.leftWing.add(t),this.add(this.leftWing);let i=new n.iNn(12,22,4);o(i,22,0,10,20,2);let a=new n.eaF(i,this.material);a.scale.x=-1,a.position.x=5,a.position.y=-10,a.position.z=-1,this.rightWing=new n.YJl,this.rightWing.add(a),this.add(this.rightWing),this.leftWing.position.x=5,this.leftWing.rotation.x=.2617994,this.resetJoints()}resetJoints(){this.leftWing.rotation.y=.01,this.leftWing.rotation.z=.2617994,this.updateRightWing()}updateRightWing(){this.rightWing.position.x=-this.leftWing.position.x,this.rightWing.position.y=this.leftWing.position.y,this.rightWing.rotation.x=this.leftWing.rotation.x,this.rightWing.rotation.y=-this.leftWing.rotation.y,this.rightWing.rotation.z=-this.leftWing.rotation.z}get map(){return this.material.map}set map(e){this.material.map=e,this.material.needsUpdate=!0}}class d extends n.YJl{constructor(){super(),Object.defineProperty(this,"rightEar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"leftEar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.material=new n._4j({side:n.hB5});let e=new n.iNn(8,8,4/3);a(e,0,0,6,6,1,14,7),this.rightEar=new n.eaF(e,this.material),this.rightEar.name="rightEar",this.rightEar.position.x=-6,this.add(this.rightEar),this.leftEar=new n.eaF(e,this.material),this.leftEar.name="leftEar",this.leftEar.position.x=6,this.add(this.leftEar)}get map(){return this.material.map}set map(e){this.material.map=e,this.material.needsUpdate=!0}}let h=10.8*Math.PI/180;class p extends n.YJl{constructor(){super(),Object.defineProperty(this,"skin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cape",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"elytra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ears",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.skin=new l,this.skin.name="skin",this.skin.position.y=8,this.add(this.skin),this.cape=new c,this.cape.name="cape",this.cape.position.y=8,this.cape.position.z=-2,this.cape.rotation.x=h,this.cape.rotation.y=Math.PI,this.add(this.cape),this.elytra=new u,this.elytra.name="elytra",this.elytra.position.y=8,this.elytra.position.z=-2,this.elytra.visible=!1,this.add(this.elytra),this.ears=new d,this.ears.name="ears",this.ears.position.y=10,this.ears.position.z=2/3,this.ears.visible=!1,this.skin.head.add(this.ears)}get backEquipment(){return this.cape.visible?"cape":this.elytra.visible?"elytra":null}set backEquipment(e){this.cape.visible="cape"===e,this.elytra.visible="elytra"===e}resetJoints(){this.skin.resetJoints(),this.cape.rotation.x=h,this.cape.position.y=8,this.cape.position.z=-2,this.elytra.position.y=8,this.elytra.position.z=-2,this.elytra.rotation.x=0,this.elytra.resetJoints()}}function f(e){return e instanceof HTMLImageElement||e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas}function m(e,t,i,n,a){let r=e.getImageData(t,i,n,a);for(let e=0;e<n;e++)for(let t=0;t<a;t++){let i=(e+t*n)*4;if(255!==r.data[i+3])return!0}return!1}function b(e,t,i){if(i){if(m(e,0,0,t,t))return}else if(m(e,0,0,t,t/2))return;let n=t/64,a=(t,i,a,r)=>e.clearRect(t*n,i*n,a*n,r*n);a(40,0,8,8),a(48,0,8,8),a(32,8,8,8),a(40,8,8,8),a(48,8,8,8),a(56,8,8,8),i&&(a(4,32,4,4),a(8,32,4,4),a(0,36,4,12),a(4,36,4,12),a(8,36,4,12),a(12,36,4,12),a(20,32,8,4),a(28,32,8,4),a(16,36,4,12),a(20,36,8,12),a(28,36,4,12),a(32,36,8,12),a(44,32,4,4),a(48,32,4,4),a(40,36,4,12),a(44,36,4,12),a(48,36,4,12),a(52,36,12,12),a(4,48,4,4),a(8,48,4,4),a(0,52,4,12),a(4,52,4,12),a(8,52,4,12),a(12,52,4,12),a(52,48,4,4),a(56,48,4,4),a(48,52,4,12),a(52,52,4,12),a(56,52,4,12),a(60,52,4,12))}function g(e,t){if(t.width!==t.height&&t.width!==2*t.height)throw Error(`Bad skin size: ${t.width}x${t.height}`);let i=t.width/64,n=14*i,a=7*i;e.width=n,e.height=a;let r=e.getContext("2d",{willReadFrequently:!0});r.clearRect(0,0,n,a),r.drawImage(t,24*i,0,n,a,0,0,n,a)}async function v(e){let t=document.createElement("img");return new Promise((i,n)=>{t.onload=()=>i(t),t.onerror=n,t.crossOrigin="anonymous","string"==typeof e?t.src=e:(void 0!==e.crossOrigin&&(t.crossOrigin=e.crossOrigin),void 0!==e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),t.src=e.src)})}let y={type:"change"},w={type:"start"},O={type:"end"},x=new n.RlV,E=new n.Zcv,P=Math.cos(70*n.cj9.DEG2RAD);class C extends n.Qev{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new n.Pq0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:n.kBv.ROTATE,MIDDLE:n.kBv.DOLLY,RIGHT:n.kBv.PAN},this.touches={ONE:n.wtR.ROTATE,TWO:n.wtR.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",$),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",$),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(y),i.update(),r=a.NONE},this.update=function(){let t=new n.Pq0,d=new n.PTz().setFromUnitVectors(e.up,new n.Pq0(0,1,0)),h=d.clone().invert(),p=new n.Pq0,f=new n.PTz,m=new n.Pq0,b=2*Math.PI;return function(g=null){var v;let w=i.object.position;t.copy(w).sub(i.target),t.applyQuaternion(d),s.setFromVector3(t),i.autoRotate&&r===a.NONE&&N(null!==(v=g)?2*Math.PI/60*i.autoRotateSpeed*v:2*Math.PI/60/60*i.autoRotateSpeed),i.enableDamping?(s.theta+=l.theta*i.dampingFactor,s.phi+=l.phi*i.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let O=i.minAzimuthAngle,C=i.maxAzimuthAngle;isFinite(O)&&isFinite(C)&&(O<-Math.PI?O+=b:O>Math.PI&&(O-=b),C<-Math.PI?C+=b:C>Math.PI&&(C-=b),O<=C?s.theta=Math.max(O,Math.min(C,s.theta)):s.theta=s.theta>(O+C)/2?Math.max(O,s.theta):Math.min(C,s.theta)),s.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,s.phi)),s.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.zoomToCursor&&S||i.object.isOrthographicCamera?s.radius=B(s.radius):s.radius=B(s.radius*c),t.setFromSpherical(s),t.applyQuaternion(h),w.copy(i.target).add(t),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let A=!1;if(i.zoomToCursor&&S){let a=null;if(i.object.isPerspectiveCamera){let e=t.length();a=B(e*c);let n=e-a;i.object.position.addScaledVector(T,n),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){let e=new n.Pq0(R.x,R.y,0);e.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),A=!0;let r=new n.Pq0(R.x,R.y,0);r.unproject(i.object),i.object.position.sub(r).add(e),i.object.updateMatrixWorld(),a=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==a&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(a).add(i.object.position):(x.origin.copy(i.object.position),x.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(x.direction))<P?e.lookAt(i.target):(E.setFromNormalAndCoplanarPoint(i.object.up,i.target),x.intersectPlane(E,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),A=!0);return c=1,S=!1,!!(A||p.distanceToSquared(i.object.position)>o||8*(1-f.dot(i.object.quaternion))>o||m.distanceToSquared(i.target)>0)&&(i.dispatchEvent(y),p.copy(i.object.position),f.copy(i.object.quaternion),m.copy(i.target),A=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ee),i.domElement.removeEventListener("pointerdown",X),i.domElement.removeEventListener("pointercancel",J),i.domElement.removeEventListener("wheel",Z),i.domElement.removeEventListener("pointermove",G),i.domElement.removeEventListener("pointerup",J),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",$),i._domElementKeyEvents=null)};let i=this,a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},r=a.NONE,o=1e-6,s=new n.YHV,l=new n.YHV,c=1,u=new n.Pq0,d=new n.I9Y,h=new n.I9Y,p=new n.I9Y,f=new n.I9Y,m=new n.I9Y,b=new n.I9Y,g=new n.I9Y,v=new n.I9Y,C=new n.I9Y,T=new n.Pq0,R=new n.I9Y,S=!1,A=[],j={};function M(){return Math.pow(.95,i.zoomSpeed)}function N(e){l.theta-=e}function _(e){l.phi-=e}let k=function(){let e=new n.Pq0;return function(t,i){e.setFromMatrixColumn(i,0),e.multiplyScalar(-t),u.add(e)}}(),L=function(){let e=new n.Pq0;return function(t,n){!0===i.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(i.object.up,e)),e.multiplyScalar(t),u.add(e)}}(),D=function(){let e=new n.Pq0;return function(t,n){let a=i.domElement;if(i.object.isPerspectiveCamera){let r=i.object.position;e.copy(r).sub(i.target);let o=e.length();k(2*t*(o*=Math.tan(i.object.fov/2*Math.PI/180))/a.clientHeight,i.object.matrix),L(2*n*o/a.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(k(t*(i.object.right-i.object.left)/i.object.zoom/a.clientWidth,i.object.matrix),L(n*(i.object.top-i.object.bottom)/i.object.zoom/a.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function I(e){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function F(e){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function U(e){if(!i.zoomToCursor)return;S=!0;let t=i.domElement.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top,r=t.width,o=t.height;R.x=n/r*2-1,R.y=-(a/o*2)+1,T.set(R.x,R.y,1).unproject(i.object).sub(i.object.position).normalize()}function B(e){return Math.max(i.minDistance,Math.min(i.maxDistance,e))}function z(e){d.set(e.clientX,e.clientY)}function W(e){f.set(e.clientX,e.clientY)}function Y(){if(1===A.length)d.set(A[0].pageX,A[0].pageY);else{let e=.5*(A[0].pageX+A[1].pageX),t=.5*(A[0].pageY+A[1].pageY);d.set(e,t)}}function H(){if(1===A.length)f.set(A[0].pageX,A[0].pageY);else{let e=.5*(A[0].pageX+A[1].pageX),t=.5*(A[0].pageY+A[1].pageY);f.set(e,t)}}function q(){let e=A[0].pageX-A[1].pageX,t=A[0].pageY-A[1].pageY,i=Math.sqrt(e*e+t*t);g.set(0,i)}function V(e){if(1==A.length)h.set(e.pageX,e.pageY);else{let t=ei(e),i=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);h.set(i,n)}p.subVectors(h,d).multiplyScalar(i.rotateSpeed);let t=i.domElement;N(2*Math.PI*p.x/t.clientHeight),_(2*Math.PI*p.y/t.clientHeight),d.copy(h)}function Q(e){if(1===A.length)m.set(e.pageX,e.pageY);else{let t=ei(e),i=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);m.set(i,n)}b.subVectors(m,f).multiplyScalar(i.panSpeed),D(b.x,b.y),f.copy(m)}function K(e){let t=ei(e),n=e.pageX-t.x,a=e.pageY-t.y,r=Math.sqrt(n*n+a*a);v.set(0,r),C.set(0,Math.pow(v.y/g.y,i.zoomSpeed)),I(C.y),g.copy(v)}function X(e){var t;!1!==i.enabled&&(0===A.length&&(i.domElement.setPointerCapture(e.pointerId),i.domElement.addEventListener("pointermove",G),i.domElement.addEventListener("pointerup",J)),t=e,A.push(t),"touch"===e.pointerType?function(e){switch(et(e),A.length){case 1:switch(i.touches.ONE){case n.wtR.ROTATE:if(!1===i.enableRotate)return;Y(),r=a.TOUCH_ROTATE;break;case n.wtR.PAN:if(!1===i.enablePan)return;H(),r=a.TOUCH_PAN;break;default:r=a.NONE}break;case 2:switch(i.touches.TWO){case n.wtR.DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;i.enableZoom&&q(),i.enablePan&&H(),r=a.TOUCH_DOLLY_PAN;break;case n.wtR.DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;i.enableZoom&&q(),i.enableRotate&&Y(),r=a.TOUCH_DOLLY_ROTATE;break;default:r=a.NONE}break;default:r=a.NONE}r!==a.NONE&&i.dispatchEvent(w)}(e):function(e){let t;switch(e.button){case 0:t=i.mouseButtons.LEFT;break;case 1:t=i.mouseButtons.MIDDLE;break;case 2:t=i.mouseButtons.RIGHT;break;default:t=-1}switch(t){case n.kBv.DOLLY:if(!1===i.enableZoom)return;U(e),g.set(e.clientX,e.clientY),r=a.DOLLY;break;case n.kBv.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===i.enablePan)return;W(e),r=a.PAN}else{if(!1===i.enableRotate)return;z(e),r=a.ROTATE}break;case n.kBv.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===i.enableRotate)return;z(e),r=a.ROTATE}else{if(!1===i.enablePan)return;W(e),r=a.PAN}break;default:r=a.NONE}r!==a.NONE&&i.dispatchEvent(w)}(e))}function G(e){!1!==i.enabled&&("touch"===e.pointerType?function(e){switch(et(e),r){case a.TOUCH_ROTATE:if(!1===i.enableRotate)return;V(e),i.update();break;case a.TOUCH_PAN:if(!1===i.enablePan)return;Q(e),i.update();break;case a.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;i.enableZoom&&K(e),i.enablePan&&Q(e),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;i.enableZoom&&K(e),i.enableRotate&&V(e),i.update();break;default:r=a.NONE}}(e):function(e){switch(r){case a.ROTATE:if(!1===i.enableRotate)return;h.set(e.clientX,e.clientY),p.subVectors(h,d).multiplyScalar(i.rotateSpeed);let t=i.domElement;N(2*Math.PI*p.x/t.clientHeight),_(2*Math.PI*p.y/t.clientHeight),d.copy(h),i.update();break;case a.DOLLY:if(!1===i.enableZoom)return;v.set(e.clientX,e.clientY),C.subVectors(v,g),C.y>0?I(M()):C.y<0&&F(M()),g.copy(v),i.update();break;case a.PAN:if(!1===i.enablePan)return;m.set(e.clientX,e.clientY),b.subVectors(m,f).multiplyScalar(i.panSpeed),D(b.x,b.y),f.copy(m),i.update()}}(e))}function J(e){(function(e){delete j[e.pointerId];for(let t=0;t<A.length;t++)if(A[t].pointerId==e.pointerId)return void A.splice(t,1)})(e),0===A.length&&(i.domElement.releasePointerCapture(e.pointerId),i.domElement.removeEventListener("pointermove",G),i.domElement.removeEventListener("pointerup",J)),i.dispatchEvent(O),r=a.NONE}function Z(e){!1!==i.enabled&&!1!==i.enableZoom&&r===a.NONE&&(e.preventDefault(),i.dispatchEvent(w),U(e),e.deltaY<0?F(M()):e.deltaY>0&&I(M()),i.update(),i.dispatchEvent(O))}function $(e){if(!1!==i.enabled&&!1!==i.enablePan){let t=!1;switch(e.code){case i.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?_(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):D(0,i.keyPanSpeed),t=!0;break;case i.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?_(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):D(0,-i.keyPanSpeed),t=!0;break;case i.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?N(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):D(i.keyPanSpeed,0),t=!0;break;case i.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?N(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):D(-i.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),i.update())}}function ee(e){!1!==i.enabled&&e.preventDefault()}function et(e){let t=j[e.pointerId];void 0===t&&(t=new n.I9Y,j[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ei(e){return j[(e.pointerId===A[0].pointerId?A[1]:A[0]).pointerId]}i.domElement.addEventListener("contextmenu",ee),i.domElement.addEventListener("pointerdown",X),i.domElement.addEventListener("pointercancel",J),i.domElement.addEventListener("wheel",Z,{passive:!1}),this.update()}}let T={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class R{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}let S=new n.qUd(-1,1,1,-1,0,1),A=new n.LoY;A.setAttribute("position",new n.qtW([-1,3,0,-1,-1,0,3,-1,0],3)),A.setAttribute("uv",new n.qtW([0,2,0,0,2,0],2));class j{constructor(e){this._mesh=new n.eaF(A,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,S)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class M extends R{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof n.BKk?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=n.LlO.clone(e.uniforms),this.material=new n.BKk({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new j(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)),this.fsQuad.render(e)}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class N extends R{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){let n,a,r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),this.inverse?(n=0,a=1):(n=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,n,0xffffffff),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,0xffffffff),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}}class _ extends R{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class k{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){let i=e.getSize(new n.I9Y);this._width=i.width,this._height=i.height,(t=new n.nWS(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:n.ix0})).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new M(T),this.copyPass.material.blending=n.XIg,this.clock=new n.zD7}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());let t=this.renderer.getRenderTarget(),i=!1;for(let t=0,n=this.passes.length;t<n;t++){let n=this.passes[t];if(!1!==n.enabled){if(n.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),n.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),n.needsSwap){if(i){let t=this.renderer.getContext(),i=this.renderer.state.buffers.stencil;i.setFunc(t.NOTEQUAL,1,0xffffffff),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),i.setFunc(t.EQUAL,1,0xffffffff)}this.swapBuffers()}void 0!==N&&(n instanceof N?i=!0:n instanceof _&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){let t=this.renderer.getSize(new n.I9Y);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;let i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(i,n)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class L extends R{constructor(e,t,i=null,a=null,r=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=a,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new n.Q1f}render(e,t,i){let n,a,r=e.autoClear;e.autoClear=!1,null!==this.overrideMaterial&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),null!==this.clearAlpha&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),!0==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(n),null!==this.overrideMaterial&&(this.scene.overrideMaterial=a),e.autoClear=r}}let D={uniforms:{tDiffuse:{value:null},resolution:{value:new n.I9Y(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	precision highp float;

	uniform sampler2D tDiffuse;

	uniform vec2 resolution;

	varying vec2 vUv;

	// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

	//----------------------------------------------------------------------------------
	// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
	// SDK Version: v3.00
	// Email:       gameworks@nvidia.com
	// Site:        http://developer.nvidia.com/
	//
	// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
	//
	// Redistribution and use in source and binary forms, with or without
	// modification, are permitted provided that the following conditions
	// are met:
	//  * Redistributions of source code must retain the above copyright
	//    notice, this list of conditions and the following disclaimer.
	//  * Redistributions in binary form must reproduce the above copyright
	//    notice, this list of conditions and the following disclaimer in the
	//    documentation and/or other materials provided with the distribution.
	//  * Neither the name of NVIDIA CORPORATION nor the names of its
	//    contributors may be used to endorse or promote products derived
	//    from this software without specific prior written permission.
	//
	// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
	// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
	// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
	// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
	// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	//
	//----------------------------------------------------------------------------------

	#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
	#endif

	/*--------------------------------------------------------------------------*/
	#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
	#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
	/*--------------------------------------------------------------------------*/

	#define NUM_SAMPLES 5

	// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
	float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
	}

	/*============================================================================

									FXAA3 QUALITY - PC

	============================================================================*/

	/*--------------------------------------------------------------------------*/
	vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
	) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
					if(earlyExit) FxaaDiscard;
			#else
					if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
					// locate the edge
					vec2 dirToEdge;
					dirToEdge.x = contrastE > contrastW ? 1. : -1.;
					dirToEdge.y = contrastS > contrastN ? 1. : -1.;
					// . 2 .      . 1 .
					// 1 0 2  ~=  0 0 1
					// . 1 .      . 0 .

					// tap 2 pixels and see which ones are "outside" the edge, to
					// determine if the edge is vertical or horizontal

					vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongH = contrast( rgbaM, rgbaAlongH );
					// . 1 .
					// 0 0 1
					// . 0 H

					vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongV = contrast( rgbaM, rgbaAlongV );
					// V 1 .
					// 0 0 1
					// . 0 .

					relativeVContrast = matchAlongV - matchAlongH;
					relativeVContrast *= fxaaQualityinvEdgeThreshold;

					if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
							// 1 1 .
							// 0 0 1
							// . 0 1

							// do a simple blur
							return mix(
									rgbaM,
									(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
									.4
							);
					}

					horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsed = 0;
			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {
					iterationsUsed = i;

					float increment = float(i + 1);

					if(!doneN) {
							nDist += increment;
							posN = posM + offNP * nDist;
							vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
							doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
							iterationsUsedN = i;
					}

					if(!doneP) {
							pDist += increment;
							posP = posM - offNP * pDist;
							vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
							doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
							iterationsUsedP = i;
					}

					if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
					doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
					doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
					rgbaM,
					rgbaN,
					dist * .5
			);
	}

	void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
					vUv,
					tDiffuse,
					resolution,
					edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
					invEdgeDetectionQuality
			);

	}
	`};class I{constructor(){Object.defineProperty(this,"speed",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"progress",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"currentId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"progress0",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"animationObjects",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}update(e,t){if(this.paused)return;let i=t*this.speed;this.animate(e,i),this.animationObjects.forEach((t,i)=>{let n=this.progress0.get(i);t(e,this.progress-n,i)}),this.progress+=i}addAnimation(e){let t=this.currentId++;return this.progress0.set(t,this.progress),this.animationObjects.set(t,e),t}removeAnimation(e){void 0!=e&&(this.animationObjects.delete(e),this.progress0.delete(e))}}class F extends I{animate(e){let t=2*this.progress,i=.02*Math.PI;e.skin.leftArm.rotation.z=.03*Math.cos(t)+i,e.skin.rightArm.rotation.z=.03*Math.cos(t+Math.PI)-i;let n=.06*Math.PI;e.cape.rotation.x=.01*Math.sin(t)+n}}class U extends n.kxk{constructor(e="",t={}){let i=new n.RoJ({transparent:!0,alphaTest:1e-5});super(i),Object.defineProperty(this,"painted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"font",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"backgroundStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textMaterial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.textMaterial=i,this.text=e,this.font=void 0===t.font?"48px Minecraft":t.font,this.margin=void 0===t.margin?[5,10,5,10]:t.margin,this.textStyle=void 0===t.textStyle?"white":t.textStyle,this.backgroundStyle=void 0===t.backgroundStyle?"rgba(0,0,0,.25)":t.backgroundStyle,this.height=void 0===t.height?4:t.height,(void 0===t.repaintAfterLoaded||t.repaintAfterLoaded)&&!document.fonts.check(this.font,this.text)?(this.paint(),this.painted=this.loadAndPaint()):(this.paint(),this.painted=Promise.resolve())}async loadAndPaint(){await document.fonts.load(this.font,this.text),this.paint()}paint(){let e=document.createElement("canvas"),t=e.getContext("2d");t.font=this.font;let i=t.measureText(this.text);e.width=this.margin[3]+i.actualBoundingBoxLeft+i.actualBoundingBoxRight+this.margin[1],e.height=this.margin[0]+i.actualBoundingBoxAscent+i.actualBoundingBoxDescent+this.margin[2],(t=e.getContext("2d")).font=this.font,t.fillStyle=this.backgroundStyle,t.fillRect(0,0,e.width,e.height),t.fillStyle=this.textStyle,t.fillText(this.text,this.margin[3]+i.actualBoundingBoxLeft,this.margin[0]+i.actualBoundingBoxAscent);let a=new n.GOR(e);a.magFilter=n.hxR,a.minFilter=n.hxR,this.textMaterial.map=a,this.textMaterial.needsUpdate=!0,this.scale.x=e.width/e.height*this.height,this.scale.y=this.height}}class B{constructor(e={}){let t;Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"playerObject",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"playerWrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"globalLight",{enumerable:!0,configurable:!0,writable:!0,value:new n.$p8(0xffffff,3)}),Object.defineProperty(this,"cameraLight",{enumerable:!0,configurable:!0,writable:!0,value:new n.HiM(0xffffff,.6)}),Object.defineProperty(this,"composer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderPass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fxaaPass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skinCanvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"capeCanvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"earsCanvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skinTexture",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"capeTexture",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"earsTexture",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"backgroundTexture",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_renderPaused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_zoom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isUserRotating",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoRotate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoRotateSpeed",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"animationID",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onContextLost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onContextRestored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pixelRatio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"devicePixelRatioQuery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onDevicePixelRatioChange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nameTag",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.canvas=void 0===e.canvas?document.createElement("canvas"):e.canvas,this.skinCanvas=document.createElement("canvas"),this.capeCanvas=document.createElement("canvas"),this.earsCanvas=document.createElement("canvas"),this.scene=new n.Z58,this.camera=new n.ubm,this.camera.add(this.cameraLight),this.scene.add(this.camera),this.scene.add(this.globalLight),n.ppV.enabled=!1,this.renderer=new n.JeP({canvas:this.canvas,preserveDrawingBuffer:!0===e.preserveDrawingBuffer}),this.onDevicePixelRatioChange=()=>{this.renderer.setPixelRatio(window.devicePixelRatio),this.updateComposerSize(),"match-device"===this._pixelRatio&&(this.devicePixelRatioQuery=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.devicePixelRatioQuery.addEventListener("change",this.onDevicePixelRatioChange,{once:!0}))},void 0===e.pixelRatio||"match-device"===e.pixelRatio?(this._pixelRatio="match-device",this.devicePixelRatioQuery=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.devicePixelRatioQuery.addEventListener("change",this.onDevicePixelRatioChange,{once:!0}),this.renderer.setPixelRatio(window.devicePixelRatio)):(this._pixelRatio=e.pixelRatio,this.devicePixelRatioQuery=null,this.renderer.setPixelRatio(e.pixelRatio)),this.renderer.setClearColor(0,0),this.renderer.capabilities.isWebGL2&&(t=new n.nWS(0,0,{depthTexture:new n.VCu(0,0,n.RQf)})),this.composer=new k(this.renderer,t),this.renderPass=new L(this.scene,this.camera),this.fxaaPass=new M(D),this.composer.addPass(this.renderPass),this.composer.addPass(this.fxaaPass),this.playerObject=new p,this.playerObject.name="player",this.playerObject.skin.visible=!1,this.playerObject.cape.visible=!1,this.playerWrapper=new n.YJl,this.playerWrapper.add(this.playerObject),this.scene.add(this.playerWrapper),this.controls=new C(this.camera,this.canvas),this.controls.enablePan=!1,this.controls.minDistance=10,this.controls.maxDistance=256,!1===e.enableControls&&(this.controls.enabled=!1),void 0!==e.skin&&this.loadSkin(e.skin,{model:e.model,ears:"current-skin"===e.ears}),void 0!==e.cape&&this.loadCape(e.cape),void 0!==e.ears&&"current-skin"!==e.ears&&this.loadEars(e.ears.source,{textureType:e.ears.textureType}),void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height),void 0!==e.background&&(this.background=e.background),void 0!==e.panorama&&this.loadPanorama(e.panorama),void 0!==e.nameTag&&(this.nameTag=e.nameTag),this.camera.position.z=1,this._zoom=void 0===e.zoom?.9:e.zoom,this.fov=void 0===e.fov?50:e.fov,this._animation=void 0===e.animation?null:e.animation,this.clock=new n.zD7,!0===e.renderPaused?(this._renderPaused=!0,this.animationID=null):this.animationID=window.requestAnimationFrame(()=>this.draw()),this.onContextLost=e=>{e.preventDefault(),null!==this.animationID&&(window.cancelAnimationFrame(this.animationID),this.animationID=null)},this.onContextRestored=()=>{this.renderer.setClearColor(0,0),this._renderPaused||this._disposed||null!==this.animationID||(this.animationID=window.requestAnimationFrame(()=>this.draw()))},this.canvas.addEventListener("webglcontextlost",this.onContextLost,!1),this.canvas.addEventListener("webglcontextrestored",this.onContextRestored,!1),this.canvas.addEventListener("mousedown",()=>{this.isUserRotating=!0},!1),this.canvas.addEventListener("mouseup",()=>{this.isUserRotating=!1},!1),this.canvas.addEventListener("touchmove",e=>{1===e.touches.length?this.isUserRotating=!0:this.isUserRotating=!1},!1),this.canvas.addEventListener("touchend",()=>{this.isUserRotating=!1},!1)}updateComposerSize(){this.composer.setSize(this.width,this.height);let e=this.renderer.getPixelRatio();this.composer.setPixelRatio(e),this.fxaaPass.material.uniforms.resolution.value.x=1/(this.width*e),this.fxaaPass.material.uniforms.resolution.value.y=1/(this.height*e)}recreateSkinTexture(){null!==this.skinTexture&&this.skinTexture.dispose(),this.skinTexture=new n.GOR(this.skinCanvas),this.skinTexture.magFilter=n.hxR,this.skinTexture.minFilter=n.hxR,this.playerObject.skin.map=this.skinTexture}recreateCapeTexture(){null!==this.capeTexture&&this.capeTexture.dispose(),this.capeTexture=new n.GOR(this.capeCanvas),this.capeTexture.magFilter=n.hxR,this.capeTexture.minFilter=n.hxR,this.playerObject.cape.map=this.capeTexture,this.playerObject.elytra.map=this.capeTexture}recreateEarsTexture(){null!==this.earsTexture&&this.earsTexture.dispose(),this.earsTexture=new n.GOR(this.earsCanvas),this.earsTexture.magFilter=n.hxR,this.earsTexture.minFilter=n.hxR,this.playerObject.ears.map=this.earsTexture}loadSkin(e,t={}){if(null===e)this.resetSkin();else{if(!f(e))return v(e).then(e=>this.loadSkin(e,t));!function(e,t){let i=!1;if(t.width!==t.height)if(t.width===2*t.height)i=!0;else throw Error(`Bad skin size: ${t.width}x${t.height}`);let n=e.getContext("2d",{willReadFrequently:!0});if(i){let i=t.width;e.width=i,e.height=i,n.clearRect(0,0,i,i),n.drawImage(t,0,0,i,i/2);n.save(),n.scale(-1,1);let a=i/64,r=(e,t,i,r,o,s)=>n.drawImage(n.canvas,e*a,t*a,i*a,r*a,-o*a,s*a,-i*a,r*a);r(4,16,4,4,20,48),r(8,16,4,4,24,48),r(0,20,4,12,24,52),r(4,20,4,12,20,52),r(8,20,4,12,16,52),r(12,20,4,12,28,52),r(44,16,4,4,36,48),r(48,16,4,4,40,48),r(40,20,4,12,40,52),r(44,20,4,12,36,52),r(48,20,4,12,32,52),r(52,20,4,12,44,52),n.restore(),b(n,e.width,!1)}else e.width=t.width,e.height=t.height,n.clearRect(0,0,t.width,t.height),n.drawImage(t,0,0,e.width,e.height),b(n,e.width,!0)}(this.skinCanvas,e),this.recreateSkinTexture(),void 0===t.model||"auto-detect"===t.model?this.playerObject.skin.modelType=function(e){let t=e.width/64,i=e.getContext("2d",{willReadFrequently:!0}),n=(e,n,a,r)=>m(i,e*t,n*t,a*t,r*t),a=(e,n,a,r)=>(function(e,t,i,n,a){let r=e.getImageData(t,i,n,a);for(let e=0;e<n;e++)for(let t=0;t<a;t++){let i=(e+t*n)*4;if(0!==r.data[i+0]||0!==r.data[i+1]||0!==r.data[i+2]||255!==r.data[i+3])return!1}return!0})(i,e*t,n*t,a*t,r*t),r=(e,n,a,r)=>(function(e,t,i,n,a){let r=e.getImageData(t,i,n,a);for(let e=0;e<n;e++)for(let t=0;t<a;t++){let i=(e+t*n)*4;if(255!==r.data[i+0]||255!==r.data[i+1]||255!==r.data[i+2]||255!==r.data[i+3])return!1}return!0})(i,e*t,n*t,a*t,r*t);return n(50,16,2,4)||n(54,20,2,12)||n(42,48,2,4)||n(46,52,2,12)||a(50,16,2,4)&&a(54,20,2,12)&&a(42,48,2,4)&&a(46,52,2,12)||r(50,16,2,4)&&r(54,20,2,12)&&r(42,48,2,4)&&r(46,52,2,12)?"slim":"default"}(this.skinCanvas):this.playerObject.skin.modelType=t.model,!1!==t.makeVisible&&(this.playerObject.skin.visible=!0),(!0===t.ears||"load-only"==t.ears)&&(g(this.earsCanvas,e),this.recreateEarsTexture(),!0===t.ears&&(this.playerObject.ears.visible=!0))}}resetSkin(){this.playerObject.skin.visible=!1,this.playerObject.skin.map=null,null!==this.skinTexture&&(this.skinTexture.dispose(),this.skinTexture=null)}loadCape(e,t={}){if(null===e)this.resetCape();else{if(!f(e))return v(e).then(e=>this.loadCape(e,t));var i=this.capeCanvas;let n=function(e){if(e.width===2*e.height)return e.width/64;if(17*e.width==22*e.height)return e.width/22;if(11*e.width==23*e.height)return e.width/46;throw Error(`Bad cape size: ${e.width}x${e.height}`)}(e);i.width=64*n,i.height=32*n;let a=i.getContext("2d",{willReadFrequently:!0});a.clearRect(0,0,i.width,i.height),a.drawImage(e,0,0,e.width,e.height),this.recreateCapeTexture(),!1!==t.makeVisible&&(this.playerObject.backEquipment=void 0===t.backEquipment?"cape":t.backEquipment)}}resetCape(){this.playerObject.backEquipment=null,this.playerObject.cape.map=null,this.playerObject.elytra.map=null,null!==this.capeTexture&&(this.capeTexture.dispose(),this.capeTexture=null)}loadEars(e,t={}){if(null===e)this.resetEars();else{if(!f(e))return v(e).then(e=>this.loadEars(e,t));if("skin"===t.textureType)g(this.earsCanvas,e);else{var i=this.earsCanvas;let t=function(e){if(e.width===2*e.height&&e.height%7==0)return e.height/7;throw Error(`Bad ears size: ${e.width}x${e.height}`)}(e);i.width=14*t,i.height=7*t;let n=i.getContext("2d",{willReadFrequently:!0});n.clearRect(0,0,i.width,i.height),n.drawImage(e,0,0,e.width,e.height)}this.recreateEarsTexture(),!1!==t.makeVisible&&(this.playerObject.ears.visible=!0)}}resetEars(){this.playerObject.ears.visible=!1,this.playerObject.ears.map=null,null!==this.earsTexture&&(this.earsTexture.dispose(),this.earsTexture=null)}loadPanorama(e){return this.loadBackground(e,n.wfO)}loadBackground(e,t){if(!f(e))return v(e).then(e=>this.loadBackground(e,t));null!==this.backgroundTexture&&this.backgroundTexture.dispose(),this.backgroundTexture=new n.gPd,this.backgroundTexture.image=e,void 0!==t&&(this.backgroundTexture.mapping=t),this.backgroundTexture.needsUpdate=!0,this.scene.background=this.backgroundTexture}draw(){let e=this.clock.getDelta();null!==this._animation&&this._animation.update(this.playerObject,e),this.autoRotate&&!(this.controls.enableRotate&&this.isUserRotating)&&(this.playerWrapper.rotation.y+=e*this.autoRotateSpeed),this.controls.update(),this.render(),this.animationID=window.requestAnimationFrame(()=>this.draw())}render(){this.composer.render()}setSize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.updateComposerSize()}dispose(){this._disposed=!0,this.canvas.removeEventListener("webglcontextlost",this.onContextLost,!1),this.canvas.removeEventListener("webglcontextrestored",this.onContextRestored,!1),null!==this.devicePixelRatioQuery&&(this.devicePixelRatioQuery.removeEventListener("change",this.onDevicePixelRatioChange),this.devicePixelRatioQuery=null),null!==this.animationID&&(window.cancelAnimationFrame(this.animationID),this.animationID=null),this.controls.dispose(),this.renderer.dispose(),this.resetSkin(),this.resetCape(),this.resetEars(),this.background=null,this.fxaaPass.fsQuad.dispose()}get disposed(){return this._disposed}get renderPaused(){return this._renderPaused}set renderPaused(e){this._renderPaused=e,this._renderPaused&&null!==this.animationID?(window.cancelAnimationFrame(this.animationID),this.animationID=null,this.clock.stop(),this.clock.autoStart=!0):this._renderPaused||this._disposed||this.renderer.getContext().isContextLost()||null!=this.animationID||(this.animationID=window.requestAnimationFrame(()=>this.draw()))}get width(){return this.renderer.getSize(new n.I9Y).width}set width(e){this.setSize(e,this.height)}get height(){return this.renderer.getSize(new n.I9Y).height}set height(e){this.setSize(this.width,e)}get background(){return this.scene.background}set background(e){null===e||e instanceof n.Q1f||e instanceof n.gPd?this.scene.background=e:this.scene.background=new n.Q1f(e),null!==this.backgroundTexture&&e!==this.backgroundTexture&&(this.backgroundTexture.dispose(),this.backgroundTexture=null)}adjustCameraDistance(){let e=4.5+16.5/Math.tan(this.fov/180*Math.PI/2)/this.zoom;e<10?e=10:e>256&&(e=256),this.camera.position.multiplyScalar(e/this.camera.position.length()),this.camera.updateProjectionMatrix()}resetCameraPose(){this.camera.position.set(0,0,1),this.camera.rotation.set(0,0,0),this.adjustCameraDistance()}get fov(){return this.camera.fov}set fov(e){this.camera.fov=e,this.adjustCameraDistance()}get zoom(){return this._zoom}set zoom(e){this._zoom=e,this.adjustCameraDistance()}get pixelRatio(){return this._pixelRatio}set pixelRatio(e){"match-device"===e?"match-device"!==this._pixelRatio&&(this._pixelRatio=e,this.onDevicePixelRatioChange()):("match-device"===this._pixelRatio&&null!==this.devicePixelRatioQuery&&(this.devicePixelRatioQuery.removeEventListener("change",this.onDevicePixelRatioChange),this.devicePixelRatioQuery=null),this._pixelRatio=e,this.renderer.setPixelRatio(e),this.updateComposerSize())}get animation(){return this._animation}set animation(e){this._animation!==e&&(this.playerObject.resetJoints(),this.playerObject.position.set(0,0,0),this.playerObject.rotation.set(0,0,0),this.clock.stop(),this.clock.autoStart=!0),null!==e&&(e.progress=0),this._animation=e}get nameTag(){return this._nameTag}set nameTag(e){null!==this._nameTag&&this.playerWrapper.remove(this._nameTag),null!==e&&(e instanceof n.B69||(e=new U(e)),this.playerWrapper.add(e),e.position.y=20),this._nameTag=e}}},2948:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3091:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(i(9690)).default,a=n.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=n.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=n.canUseDOM?window.NodeList:{},t.canUseDOM=n.canUseDOM,t.default=a},4274:e=>{"use strict";e.exports=function(){}},4436:(e,t,i)=>{"use strict";i.d(t,{k5:()=>u});var n=i(2115),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=n.createContext&&n.createContext(a),o=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){var n,a,r;n=e,a=t,r=i[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function u(e){return t=>n.createElement(d,s({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,i)=>n.createElement(t.tag,c({key:i},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var i,{attr:a,size:r,title:l}=e,u=function(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}(e,o),d=r||t.size||"1em";return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),n.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,u,{className:i,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&n.createElement("title",null,l),e.children)};return void 0!==r?n.createElement(r.Consumer,null,e=>t(e)):t(a)}},5379:(e,t,i)=>{"use strict";function n(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function a(e){this.setState((function(t){var i=this.constructor.getDerivedStateFromProps(e,t);return null!=i?i:null}).bind(this))}function r(e,t){try{var i=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(i,n)}finally{this.props=i,this.state=n}}function o(e){var t=e.prototype;if(!t||!t.isReactComponent)throw Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var i=null,o=null,s=null;if("function"==typeof t.componentWillMount?i="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(i="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==i||null!==o||null!==s)throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+(e.displayName||e.name)+" uses "+("function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()")+" but also contains the following legacy lifecycles:"+(null!==i?"\n  "+i:"")+(null!==o?"\n  "+o:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks");if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=n,t.componentWillReceiveProps=a),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=r;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,i){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:i;l.call(this,e,t,n)}}return e}i.r(t),i.d(t,{polyfill:()=>o}),n.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0},6637:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(n.openInstances.length),n.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")},t.resetState=function(){n=new i};var i=function e(){var t=this;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var i=t.openInstances.indexOf(e);-1!==i&&(t.openInstances.splice(i,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach(function(i){return i(e,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},n=new i;t.default=n},7338:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i=(0,n.default)(e);if(!i.length)return void t.preventDefault();var a=void 0,r=t.shiftKey,o=i[0],s=i[i.length-1],l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return t.activeElement.shadowRoot?e(t.activeElement.shadowRoot):t.activeElement}();if(e===l){if(!r)return;a=s}if(s!==l||r||(a=o),o===l&&r&&(a=s),a){t.preventDefault(),a.focus();return}var c=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null!=c&&"Chrome"!=c[1]&&null==/\biPod\b|\biPad\b/g.exec(navigator.userAgent)){var u=i.indexOf(l);if(u>-1&&(u+=r?-1:1),void 0===(a=i[u])){t.preventDefault(),(a=r?s:o).focus();return}t.preventDefault(),a.focus()}};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(330));e.exports=t.default},8257:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(2115),o=f(r),s=f(i(7650)),l=f(i(8637)),c=f(i(9667)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(9479)),d=i(3091),h=f(d),p=i(5379);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}var b=t.portalClassName="ReactModalPortal",g=t.bodyOpenClassName="ReactModal__Body--open",v=d.canUseDOM&&void 0!==s.default.createPortal,y=function(e){return document.createElement(e)},w=function(){return v?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer},O=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function, not "+typeof e);function t(){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");for(var e,i,a,r=arguments.length,l=Array(r),u=0;u<r;u++)l[u]=arguments[u];return i=a=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.removePortal=function(){v||s.default.unmountComponentAtNode(a.node);var e=(0,a.props.parentSelector)();e&&e.contains(a.node)?e.removeChild(a.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},a.portalRef=function(e){a.portal=e},a.renderPortal=function(e){var i=w()(a,o.default.createElement(c.default,n({defaultStyles:t.defaultStyles},e)),a.node);a.portalRef(i)},m(a,i)}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),a(t,[{key:"componentDidMount",value:function(){d.canUseDOM&&(v||(this.node=y("div")),this.node.className=this.props.portalClassName,(0,this.props.parentSelector)().appendChild(this.node),v||this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:(0,e.parentSelector)(),nextParent:(0,this.props.parentSelector)()}}},{key:"componentDidUpdate",value:function(e,t,i){if(d.canUseDOM){var n=this.props,a=n.isOpen,r=n.portalClassName;e.portalClassName!==r&&(this.node.className=r);var o=i.prevParent,s=i.nextParent;s!==o&&(o.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||a)&&(v||this.renderPortal(this.props))}}},{key:"componentWillUnmount",value:function(){if(d.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),i=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);i?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,i-t)):this.removePortal()}}},{key:"render",value:function(){return d.canUseDOM&&v?(!this.node&&v&&(this.node=y("div")),w()(o.default.createElement(c.default,n({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){u.setElement(e)}}]),t}(r.Component);O.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.oneOfType([l.default.instanceOf(h.default),l.default.instanceOf(d.SafeHTMLCollection),l.default.instanceOf(d.SafeNodeList),l.default.arrayOf(l.default.instanceOf(h.default))]),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,preventScroll:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,overlayElement:l.default.func,contentElement:l.default.func},O.defaultProps={isOpen:!1,portalClassName:b,bodyOpenClassName:g,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return o.default.createElement("div",e,t)},contentElement:function(e,t){return o.default.createElement("div",e,t)}},O.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,p.polyfill)(O),t.default=O},8353:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&e.__esModule?e:{default:e}}(i(8257)).default,e.exports=t.default},8637:(e,t,i)=>{e.exports=i(9399)()},9054:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[a,r],t=0;t<e.length;t++){var i=e[t];i&&i.parentNode&&i.parentNode.removeChild(i)}a=r=null,o=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(o.length);for(var e=[a,r],t=0;t<e.length;t++){var i=e[t]||{};console.log(i.nodeName,i.className,i.id)}console.log("edn bodyTrap ----------")};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(6637)),a=void 0,r=void 0,o=[];function s(){0!==o.length&&o[o.length-1].focusContent()}n.default.subscribe(function(e,t){a||r||((a=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),a.style.position="absolute",a.style.opacity="0",a.setAttribute("tabindex","0"),a.addEventListener("focus",s),(r=a.cloneNode()).addEventListener("focus",s)),(o=t).length>0?(document.body.firstChild!==a&&document.body.insertBefore(a,document.body.firstChild),document.body.lastChild!==r&&document.body.appendChild(r)):(a.parentElement&&a.parentElement.removeChild(a),r.parentElement&&r.parentElement.removeChild(r))})},9399:(e,t,i)=>{"use strict";var n=i(2948);function a(){}function r(){}r.resetWarningCache=a,e.exports=function(){function e(e,t,i,a,r,o){if(o!==n){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:a};return i.PropTypes=i,i}},9479:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){r&&(r.removeAttribute?r.removeAttribute("aria-hidden"):null!=r.length?r.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(r).forEach(function(e){return e.removeAttribute("aria-hidden")})),r=null},t.log=function(){},t.assertNodeList=o,t.setElement=function(e){var t=e;if("string"==typeof t&&a.canUseDOM){var i=document.querySelectorAll(t);o(i,t),t=i}return r=t||r},t.validateElement=s,t.hide=function(e){var t=!0,i=!1,n=void 0;try{for(var a,r=s(e)[Symbol.iterator]();!(t=(a=r.next()).done);t=!0)a.value.setAttribute("aria-hidden","true")}catch(e){i=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw n}}},t.show=function(e){var t=!0,i=!1,n=void 0;try{for(var a,r=s(e)[Symbol.iterator]();!(t=(a=r.next()).done);t=!0)a.value.removeAttribute("aria-hidden")}catch(e){i=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw n}}},t.documentNotReadyOrSSRTesting=function(){r=null};var n=function(e){return e&&e.__esModule?e:{default:e}}(i(4274)),a=i(3091),r=null;function o(e,t){if(!e||!e.length)throw Error("react-modal: No elements were found for selector "+t+".")}function s(e){var t=e||r;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,n.default)(!1,"react-modal: App element is not defined. Please use `Modal.setAppElement(el)` or set `appElement={el}`. This is needed so screen readers don't see main content when modal is opened. It is not recommended, but you can opt-out by setting `ariaHideApp={false}`."),[])}},9667:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(2115),s=b(i(8637)),l=m(i(1457)),c=b(i(7338)),u=m(i(9479)),d=m(i(9695)),h=i(3091),p=b(h),f=b(i(6637));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}i(9054);var g={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},v=0,y=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function, not "+typeof e);function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");var i=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.setOverlayRef=function(e){i.overlay=e,i.props.overlayRef&&i.props.overlayRef(e)},i.setContentRef=function(e){i.content=e,i.props.contentRef&&i.props.contentRef(e)},i.afterClose=function(){var e=i.props,t=e.appElement,n=e.ariaHideApp,a=e.htmlOpenClassName,r=e.bodyOpenClassName,o=e.parentSelector,s=o&&o().ownerDocument||document;r&&d.remove(s.body,r),a&&d.remove(s.getElementsByTagName("html")[0],a),n&&v>0&&0==(v-=1)&&u.show(t),i.props.shouldFocusAfterRender&&(i.props.shouldReturnFocusAfterClose?(l.returnFocus(i.props.preventScroll),l.teardownScopedFocus()):l.popWithoutFocus()),i.props.onAfterClose&&i.props.onAfterClose(),f.default.deregister(i)},i.open=function(){i.beforeOpen(),i.state.afterOpen&&i.state.beforeClose?(clearTimeout(i.closeTimer),i.setState({beforeClose:!1})):(i.props.shouldFocusAfterRender&&(l.setupScopedFocus(i.node),l.markForFocusLater()),i.setState({isOpen:!0},function(){i.openAnimationFrame=requestAnimationFrame(function(){i.setState({afterOpen:!0}),i.props.isOpen&&i.props.onAfterOpen&&i.props.onAfterOpen({overlayEl:i.overlay,contentEl:i.content})})}))},i.close=function(){i.props.closeTimeoutMS>0?i.closeWithTimeout():i.closeWithoutTimeout()},i.focusContent=function(){return i.content&&!i.contentHasFocus()&&i.content.focus({preventScroll:!0})},i.closeWithTimeout=function(){var e=Date.now()+i.props.closeTimeoutMS;i.setState({beforeClose:!0,closesAt:e},function(){i.closeTimer=setTimeout(i.closeWithoutTimeout,i.state.closesAt-Date.now())})},i.closeWithoutTimeout=function(){i.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},i.afterClose)},i.handleKeyDown=function(e){("Tab"===e.code||9===e.keyCode)&&(0,c.default)(i.content,e),i.props.shouldCloseOnEsc&&("Escape"===e.code||27===e.keyCode)&&(e.stopPropagation(),i.requestClose(e))},i.handleOverlayOnClick=function(e){null===i.shouldClose&&(i.shouldClose=!0),i.shouldClose&&i.props.shouldCloseOnOverlayClick&&(i.ownerHandlesClose()?i.requestClose(e):i.focusContent()),i.shouldClose=null},i.handleContentOnMouseUp=function(){i.shouldClose=!1},i.handleOverlayOnMouseDown=function(e){i.props.shouldCloseOnOverlayClick||e.target!=i.overlay||e.preventDefault()},i.handleContentOnClick=function(){i.shouldClose=!1},i.handleContentOnMouseDown=function(){i.shouldClose=!1},i.requestClose=function(e){return i.ownerHandlesClose()&&i.props.onRequestClose(e)},i.ownerHandlesClose=function(){return i.props.onRequestClose},i.shouldBeClosed=function(){return!i.state.isOpen&&!i.state.beforeClose},i.contentHasFocus=function(){return document.activeElement===i.content||i.content.contains(document.activeElement)},i.buildClassName=function(e,t){var n=(void 0===t?"undefined":a(t))==="object"?t:{base:g[e],afterOpen:g[e]+"--after-open",beforeClose:g[e]+"--before-close"},r=n.base;return i.state.afterOpen&&(r=r+" "+n.afterOpen),i.state.beforeClose&&(r=r+" "+n.beforeClose),"string"==typeof t&&t?r+" "+t:r},i.attributesFromObject=function(e,t){return Object.keys(t).reduce(function(i,n){return i[e+"-"+n]=t[n],i},{})},i.state={afterOpen:!1,beforeClose:!1},i.shouldClose=null,i.moveFromContentToOverlay=null,i}return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e),r(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,i=e.ariaHideApp,n=e.htmlOpenClassName,a=e.bodyOpenClassName,r=e.parentSelector,o=r&&r().ownerDocument||document;a&&d.add(o.body,a),n&&d.add(o.getElementsByTagName("html")[0],n),i&&(v+=1,u.hide(t)),f.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,i=e.className,a=e.overlayClassName,r=e.defaultStyles,o=e.children,s=i?{}:r.content,l=a?{}:r.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",a),style:n({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},u=n({id:t,ref:this.setContentRef,style:n({},s,this.props.style.content),className:this.buildClassName("content",i),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),d=this.props.contentElement(u,o);return this.props.overlayElement(c,d)}}]),t}(o.Component);y.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},y.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(p.default),s.default.instanceOf(h.SafeHTMLCollection),s.default.instanceOf(h.SafeNodeList),s.default.arrayOf(s.default.instanceOf(p.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},t.default=y,e.exports=t.default},9690:(e,t,i)=>{var n;!function(){"use strict";var a=!!("undefined"!=typeof window&&window.document&&window.document.createElement),r={canUseDOM:a,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:a&&!!(window.addEventListener||window.attachEvent),canUseViewport:a&&!!window.screen};void 0===(n=(function(){return r}).call(t,i,t,e))||(e.exports=n)}()},9695:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in i)a(e,i[t]);var r=document.body;for(var o in n)a(r,n[o]);i={},n={}},t.log=function(){};var i={},n={};function a(e,t){e.classList.remove(t)}var r=function(e,t,i){i.forEach(function(i){t[i]||(t[i]=0),t[i]+=1,e.add(i)})},o=function(e,t,i){i.forEach(function(i){t[i]&&(t[i]-=1),0===t[i]&&e.remove(i)})};t.add=function(e,t){return r(e.classList,"html"==e.nodeName.toLowerCase()?i:n,t.split(" "))},t.remove=function(e,t){return o(e.classList,"html"==e.nodeName.toLowerCase()?i:n,t.split(" "))}}}]);